<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/>
    <title>设备信息查询-查看页面</title>
    <link rel="stylesheet" type="text/css" href="/static/admin/layui/css/layui.css"/>
    <link rel="stylesheet" type="text/css" href="/static/admin/css/admin.css"/>
    <script src="/static/admin/js/jquery-3.3.1.min.js"></script>
    <!--[if IE 8]>
    <script type="text/javascript" src="/static/admin/js/jquery-1.11.3.min.js"></script>
    <![endif]-->
    <script src="/static/admin/js/basic.js"></script>
    <style type="text/css">
        .layui-form-label{
            width:140px;
            padding: 8px 5px!important;
        }
        .layui-form-item{
            margin-top:25px;
        }
        .warm_btn {
            height: 45px;
            font-size: 1.3em;
            letter-spacing: 3px;
            margin: 10px 0 30px;
        }
        #mpImg,#sbImg{
            overflow-x: auto;
            overflow-y: hidden;
        }
        #mpImg ul,#sbImg ul{
            width:400%;
        }
        #mpImg li,#sbImg li{
            float:left;
        }
        .showImg{
            width: 150px;
            height: 150px;
        }
    </style>
</head>
<body>
<div class="layui-row">
    <div class="col-xs-12">
        <div class="layui-collapse" style="margin-top:20px;">
            <form class="layui-form layui-form-pane" action="" lay-filter="eqForm">
                <div class="layui-colla-item">
                    <h2 class="layui-colla-title">基本信息</h2>
                    <div class="layui-colla-content layui-show">
                        <div class="layui-row">
                            <div class="col-xs-12 col-sm-6">
                                <div class="layui-form-item">
                                    <label class="layui-form-label">设备名称</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqName" autocomplete="off" class="layui-input" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">产品编号<span class="sign">*</span></label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqZcbh" autocomplete="off" class="layui-input" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">品名<span class="sign">*</span></label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqPmName" autocomplete="off" disabled class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">台账类别</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqTzlb" autocomplete="off" class="layui-input" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">保修期开始时间</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqBxkssj" id="date" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">设备型号</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqXh" autocomplete="off" class="layui-input" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">设备规格</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqGg" autocomplete="off" class="layui-input" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">经费来源</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="zjlyName" autocomplete="off" class="layui-input" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">单位</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqJldwName" autocomplete="off" class="layui-input" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">单价<span class="sign">*</span></label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqPrice" autocomplete="off" class="layui-input" disabled>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xs-12 col-sm-6">
                                <div class="layui-form-item">
                                    <label class="layui-form-label">使用部门</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="bmName" autocomplete="off" class="layui-input" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">管理归口<span class="sign">*</span></label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqGlgk" autocomplete="off" class="layui-input" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">设备分类</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqCxflName" autocomplete="off" class="layui-input" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">启用日期</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqQysj" id="date1" autocomplete="off"  class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">保修期结束时间</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqBxjssj" id="date2" autocomplete="off"  class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">维修商</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="wxsName" autocomplete="off" disabled class="layui-input" >
                                    </div>
                                </div>
                                <!--<div class="layui-form-item">
                                    <label class="layui-form-label" style="height:46px;line-height:30px;">第三方维修商</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="title" autocomplete="off" disabled class="layui-input">
                                    </div>
                                </div>-->
                                <div class="layui-form-item">
                                    <label class="layui-form-label">注册证名称</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqZczmc" autocomplete="off" class="layui-input" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">注册证编码</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqZczbh" autocomplete="off" class="layui-input" disabled>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="layui-colla-item">
                    <h2 class="layui-colla-title">其他信息</h2>
                    <div class="layui-colla-content layui-show">
                        <div class="layui-row">
                            <div class="col-xs-12 col-sm-6">
                                <div class="layui-form-item">
                                    <label class="layui-form-label" style="height:46px;line-height:30px;">生产商</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="scsName" autocomplete="off" disabled class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">品牌</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqPp" autocomplete="off" class="layui-input" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">生产日期</label>
                                    <div class="layui-input-block">
                                        <input type="text" class="layui-input" autocomplete="off" id="date3" >
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">生产编号</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqScbh" class="layui-input" autocomplete="off" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">配置</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqPz" autocomplete="off" class="layui-input" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">使用年限(月)</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqSynx" autocomplete="off" class="layui-input" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label" style="height:46px;line-height:30px;">供应商</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="gysName" autocomplete="off" disabled class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">合同编号</label>
                                    <div class="layui-input-block">
                                        <input type="text"  name="eqHtbh" class="layui-input" autocomplete="off" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">采购日期</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqCgrq"  class="layui-input" autocomplete="off" id="date4" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">使用部门负责人</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqSybmfzr" disabled autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                            </div>

                            <div class="col-xs-12 col-sm-6">
                                <div class="layui-form-item">
                                    <label class="layui-form-label">安装日期</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqAzrq" class="layui-input" autocomplete="off" id="date5" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">安装位置</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqAzwz" class="layui-input" autocomplete="off" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">值班类型</label>
                                    <div class="layui-input-block">
                                        <input type="text" class="layui-input" name="eqZblx" autocomplete="off" placeholder="0" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">折旧率</label>
                                    <div class="layui-input-block">
                                        <input type="text" class="layui-input" name="eqZjl" autocomplete="off" placeholder="0" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">建档人</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="userId" class="layui-input" autocomplete="off" placeholder="刘松峰" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">建档日期</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqJdrq" class="layui-input" autocomplete="off" id="date6" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">卷宗编号</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqJzbh" class="layui-input" autocomplete="off" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">档案编号</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqDabh" autocomplete="off" class="layui-input" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">院区</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqYq" autocomplete="off" class="layui-input" disabled>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">备注</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="eqBz" autocomplete="off" class="layui-input" disabled>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="layui-row">
                            <div class="col-xs-12">
                                <fieldset class="layui-elem-field layui-field-title">
                                    <legend>设备照片</legend>
                                </fieldset>
                            </div>
                            <div class="layui-row">
                                <div class="col-xs-12 col-sm-6">
                                    <div class="layui-form-item layui-form-text" >
                                        <label class="layui-form-label">设备照片</label>
                                        <div class="layui-input-block" id="sbImg">
                                           <!-- <img src="#" id="eqImg" />-->
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-6">
                                    <div class="layui-form-item layui-form-text">
                                        <label class="layui-form-label">铭牌照片</label>
                                        <div class="layui-input-block" id="mpImg">
                                            <!--<img src="#" id="paImg" />-->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-row">
                                <div class="col-xs-12">
                                    <fieldset class="layui-elem-field layui-field-title">
                                        <legend>安装环境及要求</legend>
                                    </fieldset>
                                </div>
                                <div class="col-xs-12">
                                    <div class="layui-form-item layui-form-text">
                                        <label class="layui-form-label">安装环境及要求</label>
                                        <div class="layui-input-block">
                                            <textarea class="layui-textarea" name="eqAzhjyq" disabled></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>



<script>
</script>
<script>
    formData={};
    renderMod={
        form:{
            submit:{
                filter:"submit",//可以不写
                before:function(){
                    var ad={};
                    if(formData.eqSbzp!==undefined){
                        ad.eqSbzp=formData.eqSbzp;
                    }
                    if(formData.eqMpzp!==undefined){
                        ad.eqMpzp=formData.eqMpzp;
                    }
                    if(formData.radio!==undefined){
                        ad.eqPmId=formData.radio[0].eqPmId
                    }
                    if(formData.wxs!==undefined){
                        ad.sbcsIdWxs=formData.wxs[0].sbcsIdWxs
                    }
                    if(formData.scs!==undefined){
                        ad.sbcsIdScs=formData.scs[0].sbcsIdScs
                    }
                    if(formData.gys!==undefined){
                        ad.sbcsIdGys=formData.gys[0].sbcsIdGys
                    }
                    return param = {
                        1:ad.eqSbzp,
                        2:ad.eqMpzp,
                        3:ad.eqPmId,
                        4:ad.sbcsIdWxs,
                        5:ad.sbcsIdScs,
                        6:ad.sbcsIdGys
                    }
                },
                form:{
                    url:"/eq/addEq",
                    type:"POST",
                    contentType:"application/json",
                    data:["eqName","eqZcbh","eqPmId","eqGg","eqXh","zjlyId",
                        "eqJldwId","eqPrice","eqTzlb","eqBxkssj","eqBxjssj","eqBxxysj",
                        "eqBmid","eqGlgk","eqCxflId","eqQysj","eqZczmc","eqZczbh","eqPp","eqScbh",
                        "eqPz","eqSynx","eqHtbh","eqCgrq","eqSybmfzr","eqAzrq","eqAzwz",
                        "eqZblx","eqZjl","userId","eqJdrq","eqJzbh","eqDabh","eqYq","eqSbzp",
                        "eqMpzp","eqAzhjyq"],
                    param:{
                        1:"eqSbzp",
                        2:"eqMpzp",
                        3:"eqPmId",
                        4:"sbcsIdWxs",
                        5:"sbcsIdScs",
                        6:"sbcsIdGys"
                    },
                    reload:true
                }
            },
            val: {
                get:{
                    url:"/eq/getEqById",
                    data:{
                        eqId:$.getUrlParam("eqId")
                    }
                },
                filter:"eqForm",
                select: [
                    {
                        filter:"dwList",
                        ids: "eqJldwId",
                        text: "eqJldwName",
                        url: "/eqdict/jldw"
                    },
                    {
                        filter:"zjly",
                        ids: "zjlyId",
                        text: "zjlyName",
                        url: "/eqdict/zjly"
                    },
                    {
                        filter:"cxfl",
                        ids: "eqCxflId",
                        text: "eqCxflName",
                        url: "/eqdict/cxfl"
                    },
                    {
                        filter:"bmList",
                        ids: "bmId",
                        text: "bmName",
                        url: "/supervise/bmgl/listBms2"
                    }
                ],
                func:function(data,form){
                    console.log(data);
                    console.log($.getUrlParam("eqId"));
                    $("#eqImg").attr("src",data.eqSbzp);
                    $("#paImg").attr("src",data.eqMpzp);
                    if(data.eqSbzp){
                        var newSb = data.eqSbzp.split(",");
                        var $sImg = $("#sbImg");
                        $sImg.html($("<ul>"));
                        for(var i = 0;i<newSb.length;i++){
                            $sImg.find("ul").append(
                                $("<li>").append(
                                    $("<img>").attr({"src":newSb[i],"class":"showImg"})
                                )
                            )
                        }
                    }
                    if(data.eqMpzp){
                        var newMp = data.eqMpzp.split(",");
                        var $mImg = $("#mpImg");
                        $mImg.html($("<ul>"));
                        for(var j = 0;j<newMp.length;j++){
                            $mImg.find("ul").append(
                                $("<li>").append(
                                    $("<img>").attr({"src":newMp[j],"class":"showImg"})
                                )
                            )
                        }
                    }
                }
            }
        },
        bind:{
            selectItem: [
                {
                    elem: "#pm",
                    data:formData,
                    cb:"/eq/listPmsCols",
                    db:"/eq/listPms",
                    key:"radio",
                    name:"dtdt"
                },
                {
                    elem: "#scs",
                    data:formData,
                    cb:"/cs/scsTitle",
                    db:"/cs/listScs",
                    key:"scs",
                    name:"dtdt"
                },
                {
                    elem: "#gys",
                    data:formData,
                    cb:"/cs/gysTitle",
                    db:"/cs/listGys",
                    key:"gys",
                    name:"dtdt"
                },
                {
                    elem: "#wxs",
                    data:formData,
                    cb:"/cs/wxsTitle",
                    db:"/cs/listWxs",
                    key:"wxs",
                    name:"dtdt"
                }
            ]
        }
    }
</script>
</body>
</html>
