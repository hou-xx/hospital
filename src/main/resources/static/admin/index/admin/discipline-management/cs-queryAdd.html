<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/>
    <title>设备厂商设置</title>
    <link rel="stylesheet" type="text/css" href="/static/admin/layui/css/layui.css"/>
    <link rel="stylesheet" type="text/css" href="/static/admin/css/admin.css"/>
    <script src="/static/admin/js/jquery-3.3.1.min.js"></script>
    <!--[if IE 8]>
    <script type="text/javascript" src="/static/admin/js/jquery-1.11.3.min.js"></script>
    <![endif]-->
    <script src="/static/admin/js/basic.js"></script>
    <style>
        .layui-form-item{
            margin-top:35px
        }
        span{
            color:#f10214;
        }
        .layui-form-label{
            width:130px;
            padding:8px 10px!important;
        }
    </style>
</head>

<body>
<form class="layui-form layui-form-pane" action="" lay-filter="forms">
    <div class="layui-row">
        <div class="col-xs-12 col-sm-6">

            <div class="layui-form-item">
                <label class="layui-form-label">厂商类别<span>*</span></label>
                <div class="layui-input-block">
                    <select name="sbCslbId" lay-filter="eqcslb" lay-verify="required">
                        <option></option>
                    </select>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">国别<span>*</span></label>
                <div class="layui-input-block">
                    <select name="gbId" lay-filter="gb" lay-verify="required">
                        <option></option>
                    </select>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">厂商名称<span>*</span></label>
                <div class="layui-input-block">
                    <input type="text" name="sbcsName" autocomplete="off"  class="layui-input" lay-verify="required">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">厂商代码<span></span></label>
                <div class="layui-input-block">
                    <input type="text" name="sbcsCsdm" autocomplete="off"  class="layui-input" >
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">国内地址<span></span></label>
                <div class="layui-input-block">
                    <input type="text" name="sbcsAddress" autocomplete="off"  class="layui-input" >
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">Email</label>
                <div class="layui-input-block">
                    <input type="text" name="email" autocomplete="off"  class="layui-input">
                </div>
            </div>
        </div>
        <div class="col-xs-12 col-sm-6">
            <div class="layui-form-item">
                <label class="layui-form-label">联系人<span></span></label>
                <div class="layui-input-block">
                    <input type="text" name="sbcsLxr1" autocomplete="off"  class="layui-input" >
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">联系电话<span></span></label>
                <div class="layui-input-block">
                    <input type="text" name="sbcsLxdh1" autocomplete="off"  class="layui-input" >
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">售前联系人</label>
                <div class="layui-input-block">
                    <input type="text" name="sbcsLxr2" autocomplete="off"  class="layui-input" >
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">售前电话</label>
                <div class="layui-input-block">
                    <input type="text" name="sbcsLxdh2" autocomplete="off"  class="layui-input" >
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">售后联系人</label>
                <div class="layui-input-block">
                    <input type="text" name="sbcsLxr3" autocomplete="off"  class="layui-input" >
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">售后电话</label>
                <div class="layui-input-block">
                    <input type="text" name="sbcsLxdh3" autocomplete="off"  class="layui-input" >
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">传真</label>
                <div class="layui-input-block">
                    <input type="text" name="sbcsFax" autocomplete="off"  class="layui-input" >
                </div>
            </div>
        </div>
        <div class="col-xs-12">
            <div class="layui-form-item" >
                <div class="layui-input-block" style="float: right;margin-right: 20%;">
                    <button class="layui-btn" lay-submit="" lay-filter="submit">保存</button>
                    <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                </div>
            </div>
        </div>

    </div>
</form>

<script>
    var formData = {};
    renderMod = {
        form:{
            ver:{
                sfzid: [
                    /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/
                    ,'请输入正确的身份证号'
                ]
            },
            val:{
                filter:"forms",
                get:{
                    url:"/supervise/csgl/getEqCsById",
                    type:"GET",
                    data:{sbcsId:$.getUrlParam('sbcsId')}
                },
                select:[
                    {
                        filter:"eqcslb",
                        ids:"eqCslbId",
                        text:"eqCslbName",
                        url:"/eqdict/listEqCslb"
                    },
                    {
                        filter:"gb",
                        ids:"gbId",
                        text:"gb",
                        url:"/eqdict/listGb"
                    }
                ],
                func:function(data,form){
                    $(function(){
                        if(!$("select[name='gbId']").val() || !$("select[name='sbCslbId']").val()){
                            $("select[name='sbCslbId']").val(data["sbCslbId"]);
                            $("select[name='gbId']").val(data["gbId"]);
                            form.render();
                        }
                    });




                }
            },
            submit:{
                before: function () {
                    return param = {
                        1:$.getUrlParam('sbcsId')
                    };
                },
                form:{
                    url:"/supervise/csgl/insertEqCs",
                    type:"POST",
                    contentType:"application/json",
                    data:["sbCslbId","gbId","jgId","sbcsName","sbcsAddress","email","sbcsLxr1","sbcsLxr2","sbcsLxr3","sbcsLxdh1","sbcsLxdh2","sbcsLxdh3","sbcsFax","sbcsCsdm"],
                    param: {
                        1: "sbcsId"
                    }
                    ,done:function(res){
                        if(res.code === 0){
                            layer.alert("提交成功",function () {
                                var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
                                parent.layer.close(index); //再执行关闭
                                parent.location.reload();
                            })
                        }else {
                            layer.alert("提交失败")
                        }
                    }
                }
            }
        },bind: {
            selectItem: [
                {
                    elem: "#selectRoom",
                    cb: "/supervise/bmgl/listSelectBmsCols",
                    db: "/supervise/bmgl/listBms",
                    name: "dtdt",
                    key: "radio",
                    data: formData,
                    se:"/supervise/bmgl/bmSe"
                }
            ]
        }
    }
</script>


</body>

</html>