<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/>
    <title>总账目录</title>
    <link rel="stylesheet" type="text/css" href="/static/admin/layui/css/layui.css"/>
    <link rel="stylesheet" type="text/css" href="/static/admin/css/admin.css"/>
    <script src="/static/admin/js/jquery-3.3.1.min.js"></script>
    <!--[if IE 8]>
    <script type="text/javascript" src="/static/admin/js/jquery-1.11.3.min.js"></script>
    <![endif]-->
    <script src="/static/admin/js/basic.js"></script>
    <script src="/static/admin/js/jquery.qrcode.min.js"></script>
    <style>
        .layui-inline {
            width: 140px;
        }

        .layui-field-title {
            margin-top: 10px;
            margin-bottom: 5px;
        }
        .showQ ul li{
            width: 25%;
            min-width: 300px;
            height: 155px;
            margin: 10px;
            border: 1px solid #ddd;
            overflow-x: hidden;
            padding: 5px;
            box-shadow: 0px 0px 4px 1px #ddd;
            border-radius: 5px;
            float:left;
        }
        .qrImg{
            background: #000;
            width: 40%;
            min-width: 120px;
            height: 150px;
            float: left;
        }
        .qrImg canvas{
            width: 100%;
            height: 100%;
        }
        .QRmsg{
            float: left;
            width: 58%;
            min-width: 170px;
            margin-left: 5px;
        }
    </style>
</head>

<body>

<fieldset class="layui-elem-field layui-field-title">
    <legend>已选定数据二维码</legend>
</fieldset>
<div class="showQ">
    <ul>

    </ul>
</div>

<script>
    var data = tempValue("qr","d",false)
        ,showData = ""
        ,idShow = ["设备编号","设备名称","规格","型号"]
        ,idName = ["eqId","eqName","eqGg","eqXh"]
    ;
    for(var i=0;i<data.data.length;i++){
        var $qr = $("<div>").attr("class","qrImg"),$qrM =  $("<div>").attr("class","QRmsg");
        showData = "eqId:" + data.data[i].eqId + ";sbbh:" + data.data[i].eqSbbh;
        try
        {
            document.createElement('canvas').getContext('2d');
            $qr.qrcode({render:"canvas",correctLevel:0,text:showData});
        } catch (e)
        {
            $qr.qrcode({render:"table",correctLevel:0,text:showData});
        }
        for(var j=0;j<idName.length;j++){
            $qrM .append(
                $("<p>").append(
                    $("<b>").append(idShow[j])
                ).append(
                    $("<p>").css("margin-bottom","2px").append(data.data[i][idName[j]])
                )
            )
        }
        var $li = $("<li>").append($qr).append($qrM);
        $(".showQ ul").append($li);
    }

</script>
</body>

</html>