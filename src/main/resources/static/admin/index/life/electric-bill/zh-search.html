<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/>
    <title>综合查询</title>
    <link rel="stylesheet" type="text/css" href="/static/admin/layui/css/layui.css"/>
    <link rel="stylesheet" type="text/css" href="/static/admin/css/admin.css"/>

    <script src="/static/admin/js/jquery-3.3.1.min.js"></script>
    <!--[if IE 8]>
    <script type="text/javascript" src="/static/admin/js/jquery-1.11.3.min.js"></script>
    <![endif]-->
    <script src="/static/admin/js/basic.js"></script>
    <style>
        .layui-inline {
            width: 150px;
        }

        .layui-field-title {
            margin-top: 10px;
            margin-bottom: 5px;
        }
        .lBar{
            margin:0 -15px;
        }
    </style>
</head>

<body style="background-color: #f2f2f2;">
<!--        <fieldset class="layui-elem-field layui-field-title">
    <legend>医疗设备增加查询</legend>
</fieldset>-->
<div class="layui-row">
    <div class="col-xs-12 padRight">
        <table id="table" lay-filter="table1"></table>
    </div>
</div>

<script type="text/html" id="toolBar">
    <div class="visible-xs">
        <a class="layui-btn layui-btn-primary layui-btn-fluid layui-btn-sm" lay-event="dataSearch">数据检索</a>
    </div>
    <div class="hidden-xs" id="hideXs">
        <div class="layui-row">
            <div class="col-xs-12" style="padding:0">
                <form class="layui-form layui-form-pane maxCont" action="" lay-filter="form">
                    <div class="layui-inline xs-100 mar10-0 pad0-10" style="width:70px;">
                        <span>启用日期：</span>
                    </div>
                    <div class="layui-inline col-6 mar10-0 pad0-10">
                        <input type="text" id="eqQysjLower" name="eqQysjLower" lay-verify="date" autocomplete="off"
                               class="layui-input" placeholder="下限">
                    </div>
                    <span class="lBar">~</span>
                    <div class="layui-inline col-6 mar10-0 pad0-10">
                        <input type="text" id="eqQysjUpper" name="eqQysjUpper" lay-verify="date" autocomplete="off"
                               class="layui-input" placeholder="上限">
                    </div>
                    <div class="layui-inline xs-100 mar10-0 pad0-10" style="width:70px;">
                        <span>采购日期：</span>
                    </div>
                    <div class="layui-inline col-6 mar10-0 pad0-10">
                        <input type="text" id="eqCgrqLower" name="eqCgrqLower" lay-verify="date" autocomplete="off"
                               class="layui-input" placeholder="下限">
                    </div>
                    <span class="lBar">~</span>
                    <div class="layui-inline col-6 mar10-0 pad0-10">
                        <input type="text" id="eqCgrqUpper" name="eqCgrqUpper" lay-verify="date" autocomplete="off"
                               class="layui-input" placeholder="上限">
                    </div>
                    <div class="layui-inline xs-100 mar10-0 pad0-10" style="width:70px;">
                        <span>金额区间：</span>
                    </div>
                    <div class="layui-inline col-6 mar10-0 pad0-10">
                        <input type="text" id="price1" name="eqPriceLower" lay-verify="Decimal" autocomplete="off"
                               class="layui-input" placeholder="下限(整数/元)">
                    </div>
                    <span class="lBar">~</span>
                    <div class="layui-inline col-6 mar10-0 pad0-10">
                        <input type="text" id="price2" name="eqPriceUpper" lay-verify="Decimal" autocomplete="off"
                               class="layui-input" placeholder="上限(整数/元)">
                    </div>
                    <!--<div class="layui-inline xs-100 mar10-0 pad0-10">
                        <label>
                            <select name="" lay-filter="">
                                <option value="">医疗设备增加查询</option>
                                <option value="">医疗设备减少查询</option>
                                <option value="">医疗设备分金额档查询</option>
                                <option value="">设备金额查询</option>
                            </select>
                        </label>
                    </div>-->
                    <br />
                    <div class="layui-inline xs-100 mar10-0 pad0-10">
                        <label>
                            <select name="state" lay-filter="">
                                <option value="">完好状态</option>
                                <option value="在用">在用</option>
                                <option value="报废">报废</option>
                            </select>
                        </label>
                    </div>
                    <div class="layui-inline xs-100 mar10-0 pad0-10">
                        <label>
                            <select name="eqBxqx" lay-filter="">
                                <option value="">保修状态</option>
                                <option value="在保">在保</option>
                                <option value="过保">过保</option>
                            </select>
                        </label>
                    </div>
                    <div class="layui-inline xs-100 mar10-0 pad0-10">
                        <input type="text" name="equipmentPinyinCode" class="layui-input" placeholder="设备拼音码"
                               autocomplete="off">
                    </div>
                    <div class="layui-inline xs-100 mar10-0 pad0-10">
                        <label>
                            <select name="bmId" lay-filter="eqTgks">
                                <option value="">所在科室</option>
                            </select>
                        </label>
                    </div>
                    <div class="layui-inline xs-100 mar10-0 pad0-10">
                        <label>
                            <select name="tgbmId" lay-filter="eqTgks">
                                <option value="">托管科室</option>
                            </select>
                        </label>
                    </div>
                    <div class="layui-inline xs-100 mar10-0 pad0-10">
                        <label>
                            <select name="eqCxflId" lay-filter="eqCxflId">
                                <option value="">设备类别</option>
                            </select>
                        </label>
                    </div>
                    <div class="layui-input-inline  xs-100 mar10-0 pad0-10">
                        <button class="layui-btn layui-btn-fluid" lay-submit="" lay-filter="demo1" data-type="reload">
                            <i class="layui-icon layui-icon-search"></i>查询
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</script>

<script>
    renderMod = {
        form: {
            ver: {
                Decimal: function (value, item) {
                    if (value !== '') {
                        if (!(/^([1-9][\d]{0,10}|0)$/.test(value))) {
                            return '请填写金额';
                        }
                    }
                }
            },
            val: {
                filter: "form",
                select: [
                    {
                        filter: "eqTgks",
                        ids: "bmId",
                        text: "bmName",
                        url: "/supervise/bmgl/listDelXks"
                    },
                    {
                        filter: "eqCxflId",
                        ids: "eqCxflId",
                        text: "eqCxflName",
                        url: "/eqdict/cxfl"
                    }
                ]
            },

            date: [
                {
                    elem: "#eqQysjLower",
                    value: "",
                    format: "yyyy-MM-dd"
                },
                {
                    elem: "#eqQysjUpper",
                    value: "",
                    format: "yyyy-MM-dd"
                },
                {
                    elem: "#eqCgrqLower",
                    value: "",
                    format: "yyyy-MM-dd"
                },
                {
                    elem: "#eqCgrqUpper",
                    value: "",
                    format: "yyyy-MM-dd"
                }
            ]
        },
        addTable: {
            table: {
                elem: "#table"
                , height: 'full-75'
                , cols: [[ //表头
                    {field: 'eqSbbh', title: '设备编号', minWidth: 190, sort: true}
                    , {field: 'eqZcbh', title: '资产编号', minWidth: 190, sort: true}
                    , {field: 'eqName', title: '设备名称', minWidth: 200}
                    , {field: 'eqCxflName', title: '设备类别', minWidth: 100}
                    , {field: 'eqXh', title: '型号', minWidth: 100}
                    , {field: 'eqGg', title: '规格', minWidth: 100}
                    , {field: 'bmName', title: '所在科室', minWidth: 150}
                    , {field: 'eqPrice', title: '单价', minWidth: 150, sort: true}
                    , {field: 'eqQysj', title: '启用日期', minWidth: 130, sort: true}
                    , {field: 'eqCgrq', title: '采购日期', minWidth: 130, sort: true}
                    , {field: 'eqSyzt', title: '资产状态', minWidth: 100}
                    , {field: 'eqBxqx', title: '保修时长/月', minWidth: 120}
                    , {field: 'sbcsName', title: '生产商', minWidth: 150}
                    , {field: 'eqTgks', title: '托管科室', minWidth: 150}

                ]]
                , url: "/lifeManage/selectKsEq"
                , method: "POST"
                , request: {
                    pageName: 'pageNum',
                    limitName: 'pageSize'
                }
                , where: {}
                , parseData: function (res) { //res 即为原始返回的数据
                    console.log(res.data.list);
                    return {
                        "code": res.code, //解析接口状态
                        "msg": res.msg, //解析提示文本
                        "data": res.data.list, //解析数据列表
                        "count": res.data.total //总数据数
                    }
                }

            },
            reSet: {
                url: "/lifeManage/selectKsEq",
                type: "reload",
                data: ["state", "equipmentPinyinCode", "departmentCoding", "eqCxflId", "tgbmId", "bmId",
                    "eqQysjLower", "eqQysjUpper", "eqCgrqLower", "eqCgrqUpper", "eqPriceLower", "eqPriceUpper", "eqBxqx"],
                method:"post"
            }
        }
    }
</script>
</body>

</html>