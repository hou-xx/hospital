<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>数据收集</title>
    <link rel="stylesheet" href="../layui/css/layui.css">
    <link rel="stylesheet" href="../iconfont/iconfont.css">
    <link rel="stylesheet" href="../css/dataIndex.css">
    <script src="../js/jquery-3.3.1.min.js"></script>
    <script src="../iconfont/iconfont.js"></script>
	<script src="../../../../static/admin/js/basic.js"></script>
</head>
<body>

	<!-- 表格 -->
	<table class="layui-hide" id="table" lay-filter="table1"></table>

<script type="text/html" id="toolBar">
	<!-- 搜索区域 -->
	<form class="layui-form" action="">
		<div class="layui-input-inline" style="width: 70px;">
			<select name="type" id="juDate" lay-filter="juDate" >
				<option value="1">日</option>
				<option value="2">月</option>
				<option value="3">年</option>
			</select>
		</div>
		<div class="layui-input-inline" style="width: 180px;">
			<input type="text" name="date1" id="date1" autocomplete="off" class="layui-input" placeholder="日期选择">
		</div>
		<!--部门-->
		<div class="layui-input-inline" style="width: 150px;">
			<select name="bmId"  lay-filter="bmId">
				<option value="">全部部门</option>
			</select>
		</div>
		<div class="layui-input-inline" style="width: 100px;">
			<input type="text" name="pym" autocomplete="off" placeholder="品名拼音码" class="layui-input">
		</div>
		<div class="layui-input-inline">
			<button class="layui-btn" data-type="reload">查找</button>
			<button type="reset" class="layui-btn layui-btn-primary" style="margin-left: 0;">重置</button>
		</div>
	</form>
</script>

<script src="../layui/layui.js"></script>
<script src="../js/dataIndex.js"></script>
<script>

	renderMod = {
		addTable: {
			table: {
				cols: [[ //表头
					{type: 'checkbox', fixed: 'left'}
					,{field:'bmName', title:'科室', fixed: 'left', unresize: true}
					,{field:'eqNumber', title:'台数'}
					,{field:'workHours', title:'工作时长'}
					,{field:'standbyTime', title:'待机时长'}
				]]
				, url: "/operationRecord/show4"
				, method: "POST"
				, request: {
					pageName: 'pageNum',
					limitName: 'pageSize'
				}
				, where: {}
				, parseData: function (res) { //res 即为原始返回的数据
					return {
						"code": res.code, //解析接口状态
						"msg": res.msg, //解析提示文本
						"data": res.data.list, //解析数据列表
						"count": res.data.total //总数据数
					}
				}
			},

			reSet: {
				url: "/operationRecord/show4",
				type: "reload",
				tid: "table",
				data: ["bmId","date1","type","pym"],
				method: "POST"
			}
		}
	};
	renderMod.form = {
		date:{
			elem:"#date1",
			range: true,
			format:'yyyy-MM-dd',
			isInitValue:false,
			value:today,
		},
		val: {
			filter: "forms",
			select: [
				{
					filter: "bmId",
					ids: "bmId",
					text: "bmName",
					url: "/department/show"
				}
			]
		}
	}

	layui.use(['form', 'layedit', 'laydate'], function(){

		var form = layui.form
				,layer = layui.layer
				,layedit = layui.layedit
				,laydate = layui.laydate;

		// 弹出层
		var $ = layui.jquery;

		//时时监听layui下列框的改变
		form.on('select(juDate)', function(data){
			if(data.value == 1){
				console.log(1);
				ri();
			}
			else if (data.value == 2) {
				console.log(2);
				yue();
			}
			else if (data.value == 3) {
				console.log(3);
				nian();
			}
		});

		function ri() {
			renderMod.form = {
				date:{
					elem:"#date1",
					value:today0,
					type:"date",
					format:'yyyy-MM-dd',
					range: true
				}
			};
		}

		function yue() {
			renderMod.form = {
				date:{
					elem:"#date1",
					value:today0,
					type: 'month',
					format:'yyyy-MM-dd',
					range: true
				}
			};
		}

		function nian() {
			renderMod.form = {
				date:{
					elem:"#date1",
					value:today0,
					type: 'year',
					format:'yyyy-MM-dd',
					range: true
				}
			};
		}
	});
</script>
</body>
</html>
